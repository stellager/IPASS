
<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
	<link rel="icon" type="image/png" href="assets/img/favicon.png">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

	<title>MileMate Home</title>

	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />

	<!--     Fonts and icons     -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
	<link type="text/css" href="css/bootstrap-timepicker.min.css" />
<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet">
	<!-- CSS Files -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/css/material-kit.css" rel="stylesheet"/>
<script src="jquery-3.2.1.min.js"> </script>
<script type="text/javascript">

  $('.timepicker').timepicker({
    template : 'dropdown',
    showInputs: false,
    showSeconds: false
  });
</script>
</head>

<body onload = "setUser()" class="landing-page">


<nav class="navbar navbar-fixed-top navbar-color-on-scroll navbar-transparent">
	<div class="container">
        	<!-- Brand and toggle get grouped for better mobile display -->
        	<div class="navbar-header">
        		<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigation-example">
            		<span class="sr-only">Toggle navigation</span>
		            <span class="icon-bar"></span>
		            <span class="icon-bar"></span>
		            <span class="icon-bar"></span>
        		</button>
        		<a class="navbar-brand" id= "welcome" href = "Profiel.html"  > Welcome, [Naam]<div class="ripple-container"></div></a>
				
        	</div>

        	<div class="collapse navbar-collapse" id="navigation-example">
        		<ul class="nav navbar-nav">
					<li > <a href = "calender.html"> Calender</a>
					</li>
					<li class="active"> <a href = "planner.html"> Planner</a>
					</li>
					<li> <a href = "data.html"> Data</a>
					</li>
					</ul>
					<ul class="nav navbar-nav navbar-right">
					<li>
					   
	                        <a href="http://www.creative-tim.com">
	                            Logout
	                        </a>
							
	                  </li>
					  </ul>
        	</div>
    	</div>
	</nav>
    <div class="wrapper">
        <div class="header header-filter" style="height: 400px; background-image: url('https://images.unsplash.com/photo-1423655156442-ccc11daa4e99?crop=entropy&amp;dpr=2&amp;fit=crop&amp;fm=jpg&amp;h=750&amp;ixjsv=2.1.0&amp;ixlib=rb-0.3.5&amp;q=50&amp;w=1450');">
		<div class="container">
			<div class="row">
				<div class="col-md-6 col-md-offset-3">
					<h1 class="title text-center">Planner</h1>
				</div>
			</div>
		</div>
	</div>
		<div class="section">
		<div class="main main-raised">
			<div class="container">
		    	<br/>
		    	<br/>
		    	<br/>
				<div>
				
			<div style="float:left; width:200px;">
			<div style="width:150px;">
	                	<div class="form-group is-empty">
	        	        	<input id="origin-input" class="form-control"  type="text"
        placeholder="Enter an origin location" value="">
	                	<span class="material-input"></span></div>

	                </div>
			<div style="width:150px;">
	                	<div class="form-group is-empty">
	        	        	<input id="destination-input" type="text"
        placeholder="Enter a destination location" value="" class="form-control">
	                	<span class="material-input"></span></div>
	                </div>
	                
	                 <div class="input-append bootstrap-timepicker-component">
    <input type="text" class="timepicker input-small">
    <span class="add-on">
        <i class="icon-time"></i>
    </span>
</div>
	                <div class="input-append date" style="width:150px;">
	                <input id ="datepicker" class="datepicker form-control" type="text" value="Kies een datum"></div>
	        
	                <label>Afstand: </label> <label id="afstand"> </label> <br /> <label> Duur: </label><label id="duur"></label><br /> 
	                 
	                <button  class="btn btn-success" onclick="maakRit()" data-toggle="modal" data-target="#myModal">Bewaar Rit</button>
	            </div>
	  </div>
	  <div style="float:right; width:200px;">
	
	
    </div>
    <div id="map"  align="center" style="margin:0px;width:800px;
 height:600px;"></div>

	


				
</div>

	    <footer class="footer">
	        <div class="container">
	            <nav class="pull-left">
	                <ul>
	                    <li>
	                        <a href="http://www.creative-tim.com">
	                            MileMate
	                        </a>
	                    </li>
						<li>
	                        <a href="http://presentation.creative-tim.com">
	                           About Us
	                        </a>
	                    </li>
	                    <li>
	                        <a href="http://blog.creative-tim.com">
	                           Blog
	                        </a>
	                    </li>
	                    <li>
	                        <a href="http://www.creative-tim.com/license">
	                            Licenses
	                        </a>
	                    </li>
	                </ul>
	            </nav>
	            <div class="copyright pull-right">
	                &copy; 2017, made by Tim Hoogeland
	            </div>
	        </div>
	    </footer>

	</div>
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel" action =>Wilt u deze rit opslaan?</h4>
        
      </div>
      <div class="modal-body">
      	<p> Ritnaam: </p> <label id = "naam" name ="naam"></label>
        <p> Gekozen Datum: </p> <label id = "datum" name ="datum"></label>
        <p> Gekozen Tijd: </p> <label id = "tijd" name ="tijd"></label>
        <p> Uw beginpunt: </p> <label id = "begin" name = "begin"></label> 
        <p> Uw eindpunt: </p> <label id = "eind" name = "eind"></label> 
        <p> Afstand: </p> <label id = "afstandM" name = "afstand"></label> 
        <p> Duur: </p> <label id = "duurM" name="duur"></label> 
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-simple" data-dismiss="modal">Close</button>
        <button type="button" onclick = "sendRit()" class="btn btn-info btn-simple">Save</button>
      </div>
    </div>
  </div>
</div>
</body>

	<!--   Core JS Files   -->

	<script>
	
	
	function sendRit(){
		var beginpunt = document.getElementById('origin-input').value;
  		var eindpunt = document.getElementById('destination-input').value;
  		var afstand = document.getElementById('afstand').textContent;
  		var duur = document.getElementById('duur').textContent;
  		var date = $("#datepicker").val();
  		var tijd = $("#timepicker1").val();
  		var ritnaam = "de rit maat";
	$.ajax({
	      type: "POST",
	      url: "RitServlet",
	      data: { beginpunt: beginpunt, eindpunt:eindpunt, afstand:afstand, duur:duur, date:date, tijd:tijd, ritnaam:ritnaam}
	      
	    }).done(function( msg ) {
	     alert( "Data Saved: " + beginpunt );
	      
	    });}
	function getCookie(name) {
		  var value = "; " + document.cookie;
		  var parts = value.split("; " + name + "=");
		  if (parts.length == 2) return parts.pop().split(";").shift();
		}
		function setUser(){
			var email = getCookie("login");
			var name = getCookie("name");
			console.log(email);
			console.log(name);
			var welcome = document.getElementById("welcome");
			welcome.innerHTML = name;
		}
		
      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          mapTypeControl: false,
          center: {lat: -33.8688, lng: 151.2195},
          zoom: 13
        });

        new AutocompleteDirectionsHandler(map);
      }

       /**
        * @constructor
       */
      function AutocompleteDirectionsHandler(map) {
        this.map = map;
        this.originPlaceId = null;
        this.destinationPlaceId = null;
        this.travelMode = 'DRIVING';
        var originInput = document.getElementById('origin-input');
        var destinationInput = document.getElementById('destination-input');
        
        this.directionsService = new google.maps.DirectionsService;
        this.directionsDisplay = new google.maps.DirectionsRenderer;
        this.directionsDisplay.setMap(map);

        var originAutocomplete = new google.maps.places.Autocomplete(
            originInput, {placeIdOnly: true});
        var destinationAutocomplete = new google.maps.places.Autocomplete(
            destinationInput, {placeIdOnly: true});

        this.setupPlaceChangedListener(originAutocomplete, 'ORIG');
        this.setupPlaceChangedListener(destinationAutocomplete, 'DEST');

       
      }

      // Sets a listener on a radio button to change the filter type on Places
      // Autocomplete.
      AutocompleteDirectionsHandler.prototype.setupClickListener = function(id, mode) {
        var radioButton = document.getElementById(id);
        var me = this;
        radioButton.addEventListener('click', function() {
          me.travelMode = mode;
          me.route();
        });
      };

      AutocompleteDirectionsHandler.prototype.setupPlaceChangedListener = function(autocomplete, mode) {
        var me = this;
        autocomplete.bindTo('bounds', this.map);
        autocomplete.addListener('place_changed', function() {
          var place = autocomplete.getPlace();
          if (!place.place_id) {
            window.alert("Please select an option from the dropdown list.");
            return;
          }
          if (mode === 'ORIG') {
            me.originPlaceId = place.place_id;
          } else {
            me.destinationPlaceId = place.place_id;
          }
          me.route();
        });

      };

      AutocompleteDirectionsHandler.prototype.route = function() {
        if (!this.originPlaceId || !this.destinationPlaceId) {
          return;
        }
        var me = this;

        this.directionsService.route({
          origin: {'placeId': this.originPlaceId},
          destination: {'placeId': this.destinationPlaceId},
          travelMode: this.travelMode
        }, function(response, status) {
          if (status === 'OK') {
            me.directionsDisplay.setDirections(response);
            var info = JSON.parse(JSON.stringify(response["routes"]));
            
            console.log(info[0]);
            console.log( typeof info[0]["legs"]["distance"]);
            console.log(info[0]["legs"]);
            
         
         	
            afstand.innerHTML = JSON.stringify(info[0]["legs"][0]["distance"]["text"]);
            duur.innerHTML =JSON.stringify(info[0]["legs"][0]["duration"]["text"]);
          } else {
            window.alert('Directions request failed due to ' + status);
          }
        });
      };
      
      function maakRit(){
  		var beginpunt = document.getElementById('origin-input').value;
  		var eindpunt = document.getElementById('destination-input').value;
  		var afstand = document.getElementById('afstand').textContent;
  		var duur = document.getElementById('duur').textContent;
  		var date = $("#datepicker").val();
  		var tijd = $("#timepicker1").val();
  		
  		datum.innerHTML = date;
  		begin.innerHTML = beginpunt;
  		eind.innerHTML = eindpunt;
  		afstandM.innerHTML = afstand;
  		duurM.innerHTML = duur;
  		tijd.innerHTML = tijd;
  		
  		
  		
  	}

    </script>
   
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAL27VN2eB7RcvPYcX3wVeSQY57BbMr9V4&libraries=places&callback=initMap"
        async defer></script>
	<script src="assets/js/jquery.min.js" type="text/javascript"></script>
	<script src="assets/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="assets/js/material.min.js"></script>

	<!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
	<script src="assets/js/nouislider.min.js" type="text/javascript"></script>
 
	<!--  Plugin for the Datepicker, full documentation here: http://www.eyecon.ro/bootstrap-datepicker/ -->
	<script src="assets/js/bootstrap-datepicker.js" type="text/javascript"></script>
   <script type="text/javascript" src="assets/js/bootstrap-timepicker.min.js"></script>

	<!-- Control Center for Material Kit: activating the ripples, parallax effects, scripts from the example pages etc -->
	<script src="assets/js/material-kit.js" type="text/javascript"></script>

</html>
